<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Several People Are Typing</title>
    <style>

      @font-face {
        font-family: apple-sd-gothic-neo;
        font-weight: 800;
        font-style: normal;
        src:
          local('AppleSDGothicNeo-ExtraBold'),
          local('Apple SD Gothic Neo ExtraBold');
      }

      /* reboot */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      @media (prefers-reduced-motion: no-preference) {
        :root {
          scroll-behavior: smooth;
        }
      }

      body {
        margin: 0;
        word-break: keep-all;
        -webkit-text-size-adjust: 100%;
        -webkit-font-smoothing: antialiased;
      }

      .reveal {
        transition: 4s opacity ease 500ms;
        will-change: opacity;
      }

      .reveal--hidden {
        opacity: 0;
      }

    </style>
  </head>
  <body>
    <main>
      <section style="position: fixed; top: 0; left: 0; display: flex; flex-direction: column; justify-content: center; width: 100%; height: 100svh; padding-bottom: 18px;">
        <div style="display: flex; padding: 8px 20px; gap: 8px;" class="reveal reveal--hidden">
          <div>
            <img style="width: 36px; height: 36px; border-radius: clamp(6px, min(22.222%, 12px), 12px);" src="https://ca.slack-edge.com/T022J7YLZ8W-U022A85BG79-40eeb7898156-512">
          </div>
          <div style="margin: -12px -8px -16px -16px; flex: 1; padding: 8px 8px 8px 16px;">
            <div style="display: flex; align-items: flex-end; gap: 6px;">
              <span style="color: rgb(29, 28, 29); line-height: 22px; font-size: 15px; font-weight: 800; font-family: apple-sd-gothic-neo, system-ui; margin-top: 2px; margin-bottom: -2px; letter-spacing: -0.0078125em;">찬우</span>
              <span style="color: rgb(97, 96, 97); line-height: 18px; font-size: 12px; font-weight: 300; font-family: system-ui; letter-spacing: -0.0078125em;">Just now</span>
            </div>
            <div>
              <span style="color: rgb(97, 96, 97); line-height: 22px; font-size: 15px; font-weight: 400; font-family: system-ui; letter-spacing: -0.015625em;">joined #conference with 40 others.</span>
            </div>
          </div>
        </div>
        <div style="display: flex; padding: 8px 20px; gap: 8px;">
          <div class="reveal reveal--hidden">
            <img style="width: 36px; height: 36px; border-radius: clamp(6px, min(22.222%, 12px), 12px);" src="https://ca.slack-edge.com/T022J7YLZ8W-U022A85BG79-40eeb7898156-512">
          </div>
          <div style="margin: -12px -8px -16px -16px; flex: 1; padding: 8px 8px 8px 16px;">
            <div style="display: flex; align-items: flex-end; gap: 6px;" class="reveal reveal--hidden">
              <span style="color: rgb(29, 28, 29); line-height: 22px; font-size: 15px; font-weight: 800; font-family: apple-sd-gothic-neo, system-ui; margin-top: 2px; margin-bottom: -2px; letter-spacing: -0.0078125em;">찬우</span>
              <span style="color: rgb(97, 96, 97); line-height: 18px; font-size: 12px; font-weight: 300; font-family: system-ui; letter-spacing: -0.0078125em;">Just now</span>
            </div>
            <div>
              <span style="color: rgb(29, 28, 29); line-height: 22px; font-size: 15px; font-weight: 400; font-family: system-ui; letter-spacing: -0.015625em;" id="type" data-text="인생에서 무엇이 사라지고 있나요?"></span>
            </div>
          </div>
        </div>
      </section>
      <section style="display: flex; flex-direction: column; justify-content: flex-end; width: 100%; height: 100svh;" class="reveal reveal--hidden">
        <div style="text-align: center; padding-top: 18px; padding-bottom: 18px;">
          <span style="text-transform: uppercase; color: rgb(97, 96, 97); line-height: 18px; font-size: 12px; font-weight: 600; font-family: system-ui; letter-spacing: 0.015625em;">텍스트로 진행하는 컨퍼런스, 2024</span>
        </div>
      </section>
    </main>
    <script type="module">
      import { assemble, disassemble } from 'https://cdn.jsdelivr.net/npm/es-hangul@2.1.0/dist/index.mjs'

      const textEl = document.getElementById('type')
      const text = textEl.dataset.text
      const textPartList = disassemble(text).split('')

      const f = (text, timeout) => setTimeout(
        () => { textEl.innerText = text; console.log(text) },
        timeout,
      )

      let timeout = 0
      f('', timeout)

      timeout += 320
      f('▌', timeout)

      timeout += 320
      f('', timeout)

      timeout += 320
      f('▌', timeout)

      timeout += 320
      f('', timeout)

      timeout += 320
      f('▌', timeout)

      let textPartListSlice = []
      for (let textPart of textPartList) {
        if (textPart === '?') {
          timeout += 60
          break
        }
        else if (textPart === ' ') {
          timeout += 80
        }
        else {
          timeout += 30
        }

        textPartListSlice.push(textPart)
        f(assemble(textPartListSlice), timeout)
      }

      f(text, timeout)
      setTimeout(() => document.querySelectorAll('.reveal').forEach(el => el.classList.remove('reveal--hidden')), timeout)
    </script>
  </body>
</html>
